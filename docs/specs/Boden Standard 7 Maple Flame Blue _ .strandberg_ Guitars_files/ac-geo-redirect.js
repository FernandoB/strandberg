jQuery(function($){var localStorageKey='ac_geo_visited';if(!acGeoRedirectLocalstorageExists()){return;}
if(window.location.search.indexOf('empty_cookies')>-1){localStorage.removeItem(localStorageKey);}
if(window.location.search.indexOf('no_geo_redirect')>-1){acGeoRedirectSetCookie();return;}
if(acGeoRedirectHasCookie()){return;}
var locale=AcGeoRedirect.redirectLocale;var redirectBlogData=null;if(!locale){console.log('AcGeoRedirect.redirectLocale not set. (See class-redirect.php).','Did you add the debug header (http-x-ac-debug-country-code) or are the headers setup correctly for NGINX or cloudflare?','See the readme for more info');return;}
var redirectUrl,correctSite,BreakException={},countryName,countryCode,ROW=false,checkForROW=true;try{$.each(AcGeoRedirect.AllowedCountries,function(key,item){if(key.includes('row')){return;}
$.each(item,function(cCode,cName){if(cCode===locale.toUpperCase()){if(key.includes('eu')&&(locale.toUpperCase()==='NZ'||locale.toUpperCase()==='AU')){redirectUrl=key;country=cName;countryCode=cCode;return;}else if(key.includes('au')&&(locale.toUpperCase()==='NZ'||locale.toUpperCase()==='AU')){if(AcGeoRedirect.currentBlogData.domain.includes('au')&&(locale.toUpperCase()==='NZ'||locale.toUpperCase()==='AU')){correctSite=true;}
redirectUrl=key;country='Australia';countryCode='AU';correctSite=false;throw BreakException;}
redirectUrl=key;country=cName;countryCode=cCode;if(redirectUrl===AcGeoRedirect.currentBlogData.domain+'/'){correctSite=true;throw BreakException;}else if(AcGeoRedirect.currentBlogData.domain.includes('au')&&(locale.toUpperCase()==='NZ'||locale.toUpperCase()==='AU')){correctSite=true;throw BreakException;}else{correctSite=false;throw BreakException;}}});});}catch(e){checkForROW=false;if(e!==BreakException)throw e;}
if(checkForROW){try{$.each(AcGeoRedirect.AllowedCountries,function(key,item){if(!key.includes('row')){return;}
$.each(item,function(cCode,cName){ROW=true;country=locale.toUpperCase();countryName=country;redirectUrl=key;});});}catch(e){if(e!==BreakException)throw e;}}
if((redirectUrl&&!correctSite)||(ROW&&!correctSite)){var append;UrlExists(AcGeoRedirect.CurrentPageUrl,redirectUrl,function(status){if(status===200){append=true;}else if(status===404){append=false;}
if(append){var productUrl=AcGeoRedirect.CurrentPageUrl.slice(0,redirectUrl.length-1);if(AcGeoRedirect.CurrentPageUrl.includes('eu')||AcGeoRedirect.CurrentPageUrl.includes('au')||AcGeoRedirect.CurrentPageUrl.includes('jp')){productUrl=productUrl.slice(3);}else if(AcGeoRedirect.CurrentPageUrl.includes('row')){productUrl=productUrl.slice(4);}
$('.ac-geo-popup-redirect-link').attr({href:window.location.protocol+'//'+redirectUrl.slice(0,redirectUrl.length-1)+productUrl+'?no_geo_redirect=1&currency='+redirectBlogData.currency});}});var $popup=$('#ac-geo-popup').hide(),$body=$('body'),$remainLink=$('.ac-geo-popup-remain-link');if(AcGeoRedirect.AllowedCountries.hasOwnProperty(locale.toUpperCase())){}else if(AcGeoRedirect.siteMap.hasOwnProperty(locale)){redirectBlogData=AcGeoRedirect.siteMap[locale];}else{redirectBlogData=AcGeoRedirect.siteMap[AcGeoRedirect.defaultLocale];}
if(!redirectBlogData){return;}
$body.addClass('ac-geo-popup-active');var region=redirectBlogData.region;if('United States'===region){region='the USA';}
var headerText,redirectToText;const USHeader='Shopping from the USA?';const USSecondaryHeader='Looking for the US site?'
const USUSPText='<ul><li>Get flat rate domestic shipping</li><li>Shop in USD</li><li>Shipping from US</li></ul>';const EUHeader='Shopping from Europe?';const EUSecondaryHeader='Looking for the EU site?'
const EUUSPText='<ul><li>Get free shipping</li><li>Shop in your currency</li><li>Shipping from Sweden</li></ul>';const AUHeader='Shopping from Australia/New Zealand?';const AUSecondaryHeader='Looking for the AU site?'
const AUUSPText='<ul><li>Get fixed flat rate shipping</li><li>Shop in AUD</li><li>Shipping from AU</li></ul>';const ROWHeader='Looking for the Global site?';const ROWSecondaryHeader='You seem to be shopping from a country where we don\'t have a regional site - for the best experience, go to our global site.';const ROWUSPText='';const JPHeader='? 日本からのご注文ですか？';const JPSecondaryHeader='? 日本語のサイトをご覧になられますか？'
const JPUSPText='<ul><li>? 日本語で商品情報をご覧下さい。</li><li>? どちらでどのように商品を購入可能かご案内致します。</li></ul>';const footerText='Click the flag on top to change later';if(AcGeoRedirect.currentBlogData.domain.includes('au')){remainOnText='Stay on AU site';if(countryCode==='US'){headerText=USHeader;secondaryHeader=USSecondaryHeader;uspText=USUSPText;redirectToText='Go to US site';}else if(redirectUrl.includes('eu')){headerText=EUHeader;secondaryHeader=EUSecondaryHeader;uspText=EUUSPText;redirectToText='Go to EU site';}else if(redirectUrl.includes('jp')){headerText=JPHeader;secondaryHeader=JPSecondaryHeader;uspText=JPUSPText;redirectToText='? 日本語のサイトに移ります。';}else{headerText=ROWHeader;secondaryHeader=ROWSecondaryHeader;uspText=ROWUSPText;redirectToText='Go to ROW site';}}else if(AcGeoRedirect.currentBlogData.domain.includes('eu')){remainOnText='Stay on EU site';if(countryCode==='US'){headerText=USHeader;secondaryHeader=USSecondaryHeader;uspText=USUSPText;redirectToText='Go to US site';}else if(redirectUrl.includes('au')){headerText=AUHeader;secondaryHeader=AUSecondaryHeader;uspText=AUUSPText;redirectToText='Go to AU site';}else if(redirectUrl.includes('jp')){headerText=JPHeader;secondaryHeader=JPSecondaryHeader;uspText=JPUSPText;redirectToText='? 日本語のサイトに移ります。';}else{headerText=ROWHeader;secondaryHeader=ROWSecondaryHeader;uspText=ROWUSPText;redirectToText='Go to ROW site';}}else if(AcGeoRedirect.currentBlogData.domain.includes('jp')){remainOnText='? 現在のサイトから移動しません。';if(countryCode==='US'){headerText=USHeader;secondaryHeader=USSecondaryHeader;uspText=USUSPText;redirectToText='Go to US site';}else if(redirectUrl.includes('au')){headerText=AUHeader;secondaryHeader=AUSecondaryHeader;uspText=AUUSPText;redirectToText='Go to AU site';}else if(redirectUrl.includes('eu')){headerText=EUHeader;secondaryHeader=EUSecondaryHeader;uspText=EUUSPText;redirectToText='Go to EU site';}else{headerText=ROWHeader;secondaryHeader=ROWSecondaryHeader;uspText=ROWUSPText;redirectToText='Go to ROW site';}}else if(AcGeoRedirect.currentBlogData.domain.includes('row')){remainOnText='Stay on ROW site';if(countryCode==='US'){headerText=USHeader;secondaryHeader=USSecondaryHeader;uspText=USUSPText;redirectToText='Go to US site';}else if(redirectUrl.includes('au')){headerText=AUHeader;secondaryHeader=AUSecondaryHeader;uspText=AUUSPText;redirectToText='Go to AU site';}else if(redirectUrl.includes('jp')){headerText=JPHeader;secondaryHeader=JPSecondaryHeader;uspText=JPUSPText;redirectToText='? 日本語のサイトに移ります。';}else if(redirectUrl.includes('eu')){headerText=EUHeader;secondaryHeader=EUSecondaryHeader;uspText=EUUSPText;redirectToText='Go to EU site';}else{return;}}else{remainOnText='Stay on US site';if(redirectUrl.includes('au')){headerText=AUHeader;secondaryHeader=AUSecondaryHeader;uspText=AUUSPText;redirectToText='Go to AU site';}else if(redirectUrl.includes('eu')){headerText=EUHeader;secondaryHeader=EUSecondaryHeader;uspText=EUUSPText;redirectToText='Go to EU site';}else if(redirectUrl.includes('jp')){headerText=JPHeader;secondaryHeader=JPSecondaryHeader;uspText=JPUSPText;redirectToText='? 日本語のサイトに移ります。';}else{headerText=ROWHeader;secondaryHeader=ROWSecondaryHeader;uspText=ROWUSPText;redirectToText='Go to ROW site';}}
$('.ac-geo-popup-header').html(headerText);$('.ac-geo-popup-subheader').html(secondaryHeader);$('.ac-geo-popup-usp').html(uspText);$('.ac-geo-popup-redirect-to.redirect-to').text(redirectToText);$('.ac-geo-popup-redirect-link').attr({href:'https://'+redirectUrl+'?no_geo_redirect=1&currency='+redirectBlogData.currency}).data('locale',locale);$('.ac-geo-popup-redirect-to.remain-on').text(remainOnText);$('.ac-geo-popup-footer').text(footerText);$popup.fadeIn(400);$remainLink.data('locale',AcGeoRedirect.currentBlogData.countryCode).on('click',function(e){e.preventDefault();acGeoRedirectSetCookie();$popup.fadeOut(200,function(){$body.removeClass('ac-geo-popup-active');});});}
function acGeoRedirectLocalstorageExists(){var als='angryls';try{localStorage.setItem(als,als);localStorage.removeItem(als);return true;}catch(e){return false;}}
function acGeoRedirectSetCookie(){localStorage.setItem(localStorageKey,'1');}
function acGeoRedirectHasCookie(){return localStorage.getItem(localStorageKey)==='1';}
function UrlExists(url,redirectUrl,cb){jQuery.ajax({url:url,dataType:'text',type:'GET',complete:function(xhr){if(typeof cb==='function')
cb.apply(this,[xhr.status]);}});}});